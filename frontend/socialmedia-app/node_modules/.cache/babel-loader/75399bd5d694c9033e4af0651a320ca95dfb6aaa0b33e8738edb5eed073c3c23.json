{"ast":null,"code":"var _jsxFileName = \"H:\\\\SecondProject-DjangoReact\\\\frontend\\\\socialmedia-app\\\\src\\\\components\\\\SuggestionComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { followUnfollowUser } from '../features/auth/profileSlice';\nimport { fetchSuggestions } from '../features/auth/suggestionSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Suggestion = ({\n  suggestions\n}) => {\n  _s();\n  const user = useSelector(state => state.user.user);\n  const token = useSelector(state => state.auth.token);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [followingUsers, setFollowingUsers] = useState([]);\n  const [isFollowing, setIsFollowing] = useState({}); // Define a state variable to keep track of whether the user is following the suggestion or not\n\n  const limitedSuggestions = suggestions.slice(0, 6);\n  const handleFollowUnfollow = userId => {\n    const isUserFollowing = followingUsers.includes(userId);\n    dispatch(followUnfollowUser({\n      userId,\n      token,\n      currentUser: user.id,\n      isFollowing: isUserFollowing\n    })).then(() => {\n      dispatch(fetchSuggestions(token));\n    });\n    if (isUserFollowing) {\n      setFollowingUsers(prev => prev.filter(id => id !== userId));\n    } else {\n      setFollowingUsers(prev => [...prev, userId]);\n    }\n  };\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.following) {\n      setFollowingUsers(user.following);\n      setIsFollowing(user.following.reduce((acc, id) => ({\n        ...acc,\n        [id]: true\n      }), {}));\n    }\n  }, [user, dispatch]);\n  useEffect(() => {\n    setIsFollowing(followingUsers.reduce((acc, id) => ({\n      ...acc,\n      [id]: true\n    }), {}));\n  }, [followingUsers]);\n  if (!limitedSuggestions.length) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-sm mx-auto p-4 bg-white rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold text-gray-800\",\n        children: \"Suggestions for you\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/see-all'),\n        className: \"text-blue-500 hover:underline text-sm\",\n        children: \"See All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: limitedSuggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"flex items-center justify-between p-2 mb-2 border-b border-gray-300 flex-wrap suggestion-item\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/profileview/${suggestion.id}`,\n          className: \"flex items-center text-blue-500 hover:text-blue-700\",\n          title: \"Profile\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"w-10 h-10 rounded-full mr-3 object-cover\",\n            src: suggestion.profile_pic || 'https://via.placeholder.com/800x500',\n            alt: suggestion.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm font-medium\",\n            children: suggestion.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-blue-500 border border-blue-500 px-4 py-1 rounded-md hover:bg-blue-500 hover:text-white mt-2 md:mt-0 suggestion-button\",\n          onClick: () => handleFollowUnfollow(suggestion.id),\n          children: isFollowing[suggestion.id] ? 'Unfollow' : 'Follow'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, suggestion.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(Suggestion, \"fpDy++xUA9imy39+yRc7MY2GCZ4=\", false, function () {\n  return [useSelector, useSelector, useNavigate, useDispatch];\n});\n_c = Suggestion;\nexport default Suggestion;\nvar _c;\n$RefreshReg$(_c, \"Suggestion\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Link","useNavigate","followUnfollowUser","fetchSuggestions","jsxDEV","_jsxDEV","Suggestion","suggestions","_s","user","state","token","auth","navigate","dispatch","followingUsers","setFollowingUsers","isFollowing","setIsFollowing","limitedSuggestions","slice","handleFollowUnfollow","userId","isUserFollowing","includes","currentUser","id","then","prev","filter","following","reduce","acc","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","suggestion","index","to","title","src","profile_pic","alt","username","_c","$RefreshReg$"],"sources":["H:/SecondProject-DjangoReact/frontend/socialmedia-app/src/components/SuggestionComponent.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { followUnfollowUser } from '../features/auth/profileSlice';\r\nimport { fetchSuggestions } from '../features/auth/suggestionSlice';\r\n\r\nconst Suggestion = ({ suggestions }) => {\r\n  const user = useSelector((state) => state.user.user);\r\n  const token = useSelector((state) => state.auth.token);\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [followingUsers, setFollowingUsers] = useState([]);\r\n  const [isFollowing, setIsFollowing] = useState({}); // Define a state variable to keep track of whether the user is following the suggestion or not\r\n\r\n  const limitedSuggestions = suggestions.slice(0, 6);\r\n\r\n  const handleFollowUnfollow = (userId) => {\r\n    const isUserFollowing = followingUsers.includes(userId);\r\n    dispatch(followUnfollowUser({ userId, token, currentUser:user.id, isFollowing: isUserFollowing }))\r\n    .then(() => {\r\n        dispatch(fetchSuggestions(token)); \r\n      });\r\n\r\n    if (isUserFollowing) {\r\n      setFollowingUsers((prev) => prev.filter((id) => id !== userId));\r\n    } else {\r\n      setFollowingUsers((prev) => [...prev, userId]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user?.following) {\r\n      setFollowingUsers(user.following);\r\n      setIsFollowing(user.following.reduce((acc, id) => ({ ...acc, [id]: true }), {}));\r\n    }\r\n  }, [user,dispatch]);\r\n  \r\n  useEffect(() => {\r\n    setIsFollowing(followingUsers.reduce((acc, id) => ({ ...acc, [id]: true }), {}));\r\n  }, [followingUsers]);\r\n\r\n  if (!limitedSuggestions.length) return null;\r\n\r\n  return (\r\n    <div className=\"w-full max-w-sm mx-auto p-4 bg-white rounded-lg shadow-md\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"font-semibold text-gray-800\">Suggestions for you</h3>\r\n        <button\r\n          onClick={() => navigate('/see-all')}\r\n          className=\"text-blue-500 hover:underline text-sm\"\r\n        >\r\n          See All\r\n        </button>\r\n      </div>\r\n      <ul>\r\n        {limitedSuggestions.map((suggestion, index) => (\r\n          <li\r\n          key={suggestion.id}\r\n          className=\"flex items-center justify-between p-2 mb-2 border-b border-gray-300 flex-wrap suggestion-item\"\r\n        >\r\n          <Link\r\n            to={`/profileview/${suggestion.id}`}\r\n            className=\"flex items-center text-blue-500 hover:text-blue-700\"\r\n            title=\"Profile\"\r\n          >\r\n            <img\r\n              className=\"w-10 h-10 rounded-full mr-3 object-cover\"\r\n              src={suggestion.profile_pic || 'https://via.placeholder.com/800x500'}\r\n              alt={suggestion.username}\r\n            />\r\n            <p className=\"text-sm font-medium\">{suggestion.username}</p>\r\n          </Link>\r\n        \r\n          <button\r\n            className=\"text-blue-500 border border-blue-500 px-4 py-1 rounded-md hover:bg-blue-500 hover:text-white mt-2 md:mt-0 suggestion-button\"\r\n            onClick={() => handleFollowUnfollow(suggestion.id)}\r\n          >\r\n            {isFollowing[suggestion.id] ? 'Unfollow' : 'Follow'}\r\n          </button>\r\n        </li>\r\n        \r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Suggestion;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}