{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { BASE_URL } from '../../config';\n\n// Define the initial state\nconst initialState = {\n  profile: null,\n  posts: [],\n  bookmarks: [],\n  error: null,\n  loading: false\n};\n\n// Define the async thunks\nexport const fetchProfile = createAsyncThunk('profile/fetchProfile', async (userId, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const token = getState().auth.token;\n    const response = await axios.get(`${BASE_URL}/api/users/profile/${userId}/`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const fetchPosts = createAsyncThunk('profile/fetchPosts', async (userId, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const token = getState().auth.token;\n    const response = await axios.get(`${BASE_URL}/api/posts/?user_id=${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const fetchBookmarks = createAsyncThunk('profile/fetchBookmarks', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const token = getState().auth.token;\n    const response = await axios.get(`${BASE_URL}/api/bookmarks/`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data.map(bookmark => bookmark.post);\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\n\n// Define the reducer\nconst profileSlice = createSlice({\n  name: 'profile',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchProfile.pending, state => {\n      state.loading = true;\n    }).addCase(fetchProfile.fulfilled, (state, action) => {\n      state.profile = action.payload;\n      state.loading = false;\n    }).addCase(fetchProfile.rejected, (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    }).addCase(fetchPosts.pending, state => {\n      state.loading = true;\n    }).addCase(fetchPosts.fulfilled, (state, action) => {\n      state.posts = action.payload;\n      state.loading = false;\n    }).addCase(fetchPosts.rejected, (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    }).addCase(fetchBookmarks.pending, state => {\n      state.loading = true;\n    }).addCase(fetchBookmarks.fulfilled, (state, action) => {\n      state.bookmarks = action.payload;\n      state.loading = false;\n    }).addCase(fetchBookmarks.rejected, (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    });\n  }\n});\nexport const ProfileReducer = profileSlice.reducer;\nexport const {} = profileSlice.actions;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","BASE_URL","initialState","profile","posts","bookmarks","error","loading","fetchProfile","userId","getState","rejectWithValue","token","auth","response","get","headers","Authorization","data","fetchPosts","fetchBookmarks","_","map","bookmark","post","profileSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","ProfileReducer","reducer","actions"],"sources":["H:/SecondProject-DjangoReact/frontend/socialmedia-app/src/features/auth/profileSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { BASE_URL } from '../../config';\r\n\r\n\r\n// Define the initial state\r\nconst initialState = {\r\n  profile: null,\r\n  posts: [],\r\n  bookmarks: [],\r\n  error: null,\r\n  loading: false,\r\n};\r\n\r\n// Define the async thunks\r\nexport const fetchProfile = createAsyncThunk(\r\n  'profile/fetchProfile',\r\n  async (userId, { getState, rejectWithValue }) => {\r\n    try {\r\n      const token = getState().auth.token;\r\n      const response = await axios.get(`${BASE_URL}/api/users/profile/${userId}/`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchPosts = createAsyncThunk(\r\n  'profile/fetchPosts',\r\n  async (userId, { getState, rejectWithValue }) => {\r\n    try {\r\n      const token = getState().auth.token;\r\n      const response = await axios.get(`${BASE_URL}/api/posts/?user_id=${userId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchBookmarks = createAsyncThunk(\r\n  'profile/fetchBookmarks',\r\n  async (_, { getState, rejectWithValue }) => {\r\n    try {\r\n      const token = getState().auth.token;\r\n      const response = await axios.get(`${BASE_URL}/api/bookmarks/`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      return response.data.map(bookmark => bookmark.post);\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\n// Define the reducer\r\nconst profileSlice = createSlice({\r\n  name: 'profile',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchProfile.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(fetchProfile.fulfilled, (state, action) => {\r\n        state.profile = action.payload;\r\n        state.loading = false;\r\n      })\r\n      .addCase(fetchProfile.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.loading = false;\r\n      })\r\n      .addCase(fetchPosts.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(fetchPosts.fulfilled, (state, action) => {\r\n        state.posts = action.payload;\r\n        state.loading = false;\r\n      })\r\n      .addCase(fetchPosts.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.loading = false;\r\n      })\r\n      .addCase(fetchBookmarks.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(fetchBookmarks.fulfilled, (state, action) => {\r\n        state.bookmarks = action.payload;\r\n        state.loading = false;\r\n      })\r\n      .addCase(fetchBookmarks.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.loading = false;\r\n      });\r\n  },\r\n});\r\n\r\nexport const ProfileReducer= profileSlice.reducer;\r\nexport const {} = profileSlice.actions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}