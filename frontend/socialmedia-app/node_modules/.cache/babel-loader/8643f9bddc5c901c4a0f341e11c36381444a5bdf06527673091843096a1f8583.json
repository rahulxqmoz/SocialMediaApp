{"ast":null,"code":"var _s2 = $RefreshSig$();\nimport { useEffect } from 'react';\nconst useNotifications = onMessage => {\n  _s2();\n  useEffect(() => {\n    const socket = new WebSocket('ws://localhost:8000/ws/notifications/');\n    socket.onopen = () => {\n      console.log('WebSocket connection established');\n    };\n    socket.onmessage = event => {\n      const notification = JSON.parse(event.data);\n      onMessage(notification);\n    };\n    socket.onerror = error => {\n      console.error('WebSocket error:', error);\n    };\n    socket.onclose = event => {\n      var _s = $RefreshSig$();\n      console.log('WebSocket connection closed:', event);\n      // Optionally, try to reconnect\n      _s(setTimeout(_s(() => {\n        _s();\n        useNotifications(onMessage);\n      }, \"2CIanr4M1AQcYw7Ge7HlTtcHlO0=\", false, function () {\n        return [useNotifications];\n      }), 1000), \"2CIanr4M1AQcYw7Ge7HlTtcHlO0=\", false, function () {\n        return [useNotifications];\n      }); // Attempt to reconnect after 1 second\n    };\n\n    // Cleanup on component unmount\n    return () => {\n      socket.close();\n    };\n  }, [onMessage]);\n};\n_s2(useNotifications, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default useNotifications;","map":{"version":3,"names":["useEffect","useNotifications","onMessage","_s2","socket","WebSocket","onopen","console","log","onmessage","event","notification","JSON","parse","data","onerror","error","onclose","_s","$RefreshSig$","setTimeout","close"],"sources":["H:/SecondProject-DjangoReact/frontend/socialmedia-app/src/components/NotificationService.js"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nconst useNotifications = (onMessage) => {\r\n  useEffect(() => {\r\n    const socket = new WebSocket('ws://localhost:8000/ws/notifications/');\r\n\r\n    socket.onopen = () => {\r\n      console.log('WebSocket connection established');\r\n    };\r\n\r\n    socket.onmessage = (event) => {\r\n      const notification = JSON.parse(event.data);\r\n      onMessage(notification);\r\n    };\r\n\r\n    socket.onerror = (error) => {\r\n      console.error('WebSocket error:', error);\r\n    };\r\n\r\n    socket.onclose = (event) => {\r\n      console.log('WebSocket connection closed:', event);\r\n      // Optionally, try to reconnect\r\n      setTimeout(() => {\r\n        useNotifications(onMessage);\r\n      }, 1000); // Attempt to reconnect after 1 second\r\n    };\r\n\r\n    // Cleanup on component unmount\r\n    return () => {\r\n      socket.close();\r\n    };\r\n  }, [onMessage]);\r\n};\r\n\r\nexport default useNotifications;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,MAAMC,gBAAgB,GAAIC,SAAS,IAAK;EAAAC,GAAA;EACtCH,SAAS,CAAC,MAAM;IACd,MAAMI,MAAM,GAAG,IAAIC,SAAS,CAAC,uCAAuC,CAAC;IAErED,MAAM,CAACE,MAAM,GAAG,MAAM;MACpBC,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;IACjD,CAAC;IAEDJ,MAAM,CAACK,SAAS,GAAIC,KAAK,IAAK;MAC5B,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;MAC3CZ,SAAS,CAACS,YAAY,CAAC;IACzB,CAAC;IAEDP,MAAM,CAACW,OAAO,GAAIC,KAAK,IAAK;MAC1BT,OAAO,CAACS,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IAC1C,CAAC;IAEDZ,MAAM,CAACa,OAAO,GAAIP,KAAK,IAAK;MAAA,IAAAQ,EAAA,GAAAC,YAAA;MAC1BZ,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEE,KAAK,CAAC;MAClD;MACAQ,EAAA,CAAAE,UAAU,CAAAF,EAAA,CAAC,MAAM;QAAAA,EAAA;QACfjB,gBAAgB,CAACC,SAAS,CAAC;MAC7B,CAAC;QAAA,QADCD,gBAAgB;MAAA,IACf,IAAI,CAAC;QAAA,QADNA,gBAAgB;MAAA,GACT,CAAC;IACZ,CAAC;;IAED;IACA,OAAO,MAAM;MACXG,MAAM,CAACiB,KAAK,CAAC,CAAC;IAChB,CAAC;EACH,CAAC,EAAE,CAACnB,SAAS,CAAC,CAAC;AACjB,CAAC;AAACC,GAAA,CA9BIF,gBAAgB;AAgCtB,eAAeA,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}