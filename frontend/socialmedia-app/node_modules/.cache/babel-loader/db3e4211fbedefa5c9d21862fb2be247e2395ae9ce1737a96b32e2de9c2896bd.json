{"ast":null,"code":"var _s = $RefreshSig$();\nimport connectWebSocket from \"./websocket\";\nexport const handleWebSocketConnection = () => {\n  _s();\n  const token = useSelector(state => state.auth.token);\n  const ws = connectWebSocket(token);\n  ws.onmessage = event => {\n    const data = JSON.parse(event.data);\n    if (data.type === 'LIKE_UPDATE') {\n      dispatch(updatePostLikes({\n        postId: data.postId,\n        likes: data.likes,\n        totalLikes: data.totalLikes\n      }));\n    } else if (data.type === 'COMMENT_UPDATE') {\n      dispatch(updatePostComments({\n        postId: data.postId,\n        comments: data.comments,\n        totalComments: data.totalComments\n      }));\n    }\n  };\n  ws.onclose = () => {\n    console.log('WebSocket connection closed');\n  };\n  ws.onerror = error => {\n    console.log('WebSocket error:', error);\n  };\n};\n_s(handleWebSocketConnection, \"bD5+gKbiITcJRDYAIJK4ZSEgato=\", true);","map":{"version":3,"names":["connectWebSocket","handleWebSocketConnection","_s","token","useSelector","state","auth","ws","onmessage","event","data","JSON","parse","type","dispatch","updatePostLikes","postId","likes","totalLikes","updatePostComments","comments","totalComments","onclose","console","log","onerror","error"],"sources":["H:/SecondProject-DjangoReact/frontend/socialmedia-app/src/handleWebSocket.js"],"sourcesContent":["import connectWebSocket from \"./websocket\";\r\n\r\nexport const  handleWebSocketConnection = () => {\r\n    const token = useSelector((state) => state.auth.token);\r\n    const ws = connectWebSocket(token);\r\n    ws.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      if (data.type === 'LIKE_UPDATE') {\r\n        dispatch(updatePostLikes({\r\n          postId: data.postId,\r\n          likes: data.likes,\r\n          totalLikes: data.totalLikes,\r\n        }));\r\n      } else if (data.type === 'COMMENT_UPDATE') {\r\n        dispatch(updatePostComments({\r\n          postId: data.postId,\r\n          comments: data.comments,\r\n          totalComments: data.totalComments,\r\n        }));\r\n      }\r\n    };\r\n    ws.onclose = () => {\r\n      console.log('WebSocket connection closed');\r\n    };\r\n    ws.onerror = (error) => {\r\n      console.log('WebSocket error:', error);\r\n    };\r\n  };"],"mappings":";AAAA,OAAOA,gBAAgB,MAAM,aAAa;AAE1C,OAAO,MAAOC,yBAAyB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5C,MAAMC,KAAK,GAAGC,WAAW,CAAEC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAACH,KAAK,CAAC;EACtD,MAAMI,EAAE,GAAGP,gBAAgB,CAACG,KAAK,CAAC;EAClCI,EAAE,CAACC,SAAS,GAAIC,KAAK,IAAK;IACxB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;IACnC,IAAIA,IAAI,CAACG,IAAI,KAAK,aAAa,EAAE;MAC/BC,QAAQ,CAACC,eAAe,CAAC;QACvBC,MAAM,EAAEN,IAAI,CAACM,MAAM;QACnBC,KAAK,EAAEP,IAAI,CAACO,KAAK;QACjBC,UAAU,EAAER,IAAI,CAACQ;MACnB,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAIR,IAAI,CAACG,IAAI,KAAK,gBAAgB,EAAE;MACzCC,QAAQ,CAACK,kBAAkB,CAAC;QAC1BH,MAAM,EAAEN,IAAI,CAACM,MAAM;QACnBI,QAAQ,EAAEV,IAAI,CAACU,QAAQ;QACvBC,aAAa,EAAEX,IAAI,CAACW;MACtB,CAAC,CAAC,CAAC;IACL;EACF,CAAC;EACDd,EAAE,CAACe,OAAO,GAAG,MAAM;IACjBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;EAC5C,CAAC;EACDjB,EAAE,CAACkB,OAAO,GAAIC,KAAK,IAAK;IACtBH,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEE,KAAK,CAAC;EACxC,CAAC;AACH,CAAC;AAACxB,EAAA,CAzBUD,yBAAyB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}