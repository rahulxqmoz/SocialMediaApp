{"ast":null,"code":"// profileThunks.js\nimport axios from 'axios';\nimport { BASE_URL } from '../../config';\nexport const fetchProfile = async (userId, token) => {\n  return dispatch => {\n    axios.get(`${BASE_URL}/api/users/profile/${userId}/`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      dispatch(setProfile(response.data));\n    }).catch(error => {\n      var _error$response, _error$response$data;\n      dispatch(setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || 'Failed to fetch profile.'));\n    });\n  };\n};\nexport const fetchPosts = async () => {\n  return dispatch => {\n    axios.get(`${BASE_URL}/api/posts/`).then(response => {\n      dispatch(setPosts(response.data));\n    }).catch(error => {\n      var _error$response2, _error$response2$data;\n      dispatch(setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.detail) || 'Failed to fetch posts.'));\n    });\n  };\n};\nexport const likePost = async postId => {\n  return dispatch => {\n    axios.post(`${BASE_URL}/api/likes/`, {\n      post: postId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.status === 201) {\n        dispatch(setLikedPosts({\n          ...likedPosts,\n          [postId]: true\n        }));\n      } else if (response.status === 204) {\n        dispatch(setLikedPosts({\n          ...likedPosts,\n          [postId]: false\n        }));\n      }\n    }).catch(error => {\n      console.error('Error liking/unliking post:', error);\n    });\n  };\n};\nexport const submitComment = async (postId, commentText, parentId = null) => {\n  return dispatch => {\n    axios.post(`${BASE_URL}/api/comments/`, {\n      post: postId,\n      content: commentText,\n      user: user.id,\n      parent: parentId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.ok) {\n        return response.data;\n      }\n    }).then(data => {\n      dispatch(setComments({\n        ...comments,\n        [postId]: [...(comments[postId] || []), data]\n      }));\n      dispatch(setNewComment(''));\n      dispatch(setReplyingToCommentId(null));\n    }).catch(error => {\n      console.error('Error submitting comment:', error);\n    });\n  };\n};","map":{"version":3,"names":["axios","BASE_URL","fetchProfile","userId","token","dispatch","get","headers","Authorization","then","response","setProfile","data","catch","error","_error$response","_error$response$data","setError","detail","fetchPosts","setPosts","_error$response2","_error$response2$data","likePost","postId","post","status","setLikedPosts","likedPosts","console","submitComment","commentText","parentId","content","user","id","parent","ok","setComments","comments","setNewComment","setReplyingToCommentId"],"sources":["H:/SecondProject-DjangoReact/frontend/socialmedia-app/src/features/posts/profileThunks.js"],"sourcesContent":["// profileThunks.js\r\nimport axios from 'axios';\r\nimport { BASE_URL } from '../../config';\r\n\r\nexport const fetchProfile = async (userId, token) => {\r\n  return (dispatch) => {\r\n    axios.get(`${BASE_URL}/api/users/profile/${userId}/`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        dispatch(setProfile(response.data));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(setError(error.response?.data?.detail || 'Failed to fetch profile.'));\r\n      });\r\n  };\r\n};\r\n\r\nexport const fetchPosts = async () => {\r\n  return (dispatch) => {\r\n    axios.get(`${BASE_URL}/api/posts/`)\r\n      .then((response) => {\r\n        dispatch(setPosts(response.data));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(setError(error.response?.data?.detail || 'Failed to fetch posts.'));\r\n      });\r\n  };\r\n};\r\n\r\nexport const likePost = async (postId) => {\r\n  return (dispatch) => {\r\n    axios.post(`${BASE_URL}/api/likes/`, {\r\n      post: postId,\r\n    }, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status === 201) {\r\n          dispatch(setLikedPosts({ ...likedPosts, [postId]: true }));\r\n        } else if (response.status === 204) {\r\n          dispatch(setLikedPosts({ ...likedPosts, [postId]: false }));\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error liking/unliking post:', error);\r\n      });\r\n  };\r\n};\r\n\r\nexport const submitComment = async (postId, commentText, parentId = null) => {\r\n  return (dispatch) => {\r\n    axios.post(`${BASE_URL}/api/comments/`, {\r\n      post: postId,\r\n      content: commentText,\r\n      user: user.id,\r\n      parent: parentId,\r\n    }, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.data;\r\n        }\r\n      })\r\n      .then((data) => {\r\n        dispatch(setComments({ ...comments, [postId]: [...(comments[postId] || []), data] }));\r\n        dispatch(setNewComment(''));\r\n        dispatch(setReplyingToCommentId(null));\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error submitting comment:', error);\r\n      });\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}