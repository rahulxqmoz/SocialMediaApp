{"ast":null,"code":"// profileThunks.js\nimport axios from 'axios';\nimport { BASE_URL } from '../../config';\nimport { setModalIsOpen, setModalImage, setImageType, setNewComment, setReplyingToCommentId, setCommentText, setShowEmojiPicker, setFollowerCount, setFollowingCount, setBookmarkPosts, setError, setLoading, setLikedPosts, setPosts } from '../profileSlice';\nexport const fetchProfile = async (userId, token) => {\n  return dispatch => {\n    axios.get(`${BASE_URL}/api/users/profile/${userId}/`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      dispatch(setProfile(response.data));\n    }).catch(error => {\n      var _error$response, _error$response$data;\n      dispatch(setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || 'Failed to fetch profile.'));\n    });\n  };\n};\nexport const fetchPosts = async () => {\n  return dispatch => {\n    axios.get(`${BASE_URL}/api/posts/`).then(response => {\n      dispatch(setPosts(response.data));\n    }).catch(error => {\n      var _error$response2, _error$response2$data;\n      dispatch(setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.detail) || 'Failed to fetch posts.'));\n    });\n  };\n};\nexport const likePost = async postId => {\n  return dispatch => {\n    axios.post(`${BASE_URL}/api/likes/`, {\n      post: postId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.status === 201) {\n        dispatch(setLikedPosts({\n          ...likedPosts,\n          [postId]: true\n        }));\n      } else if (response.status === 204) {\n        dispatch(setLikedPosts({\n          ...likedPosts,\n          [postId]: false\n        }));\n      }\n    }).catch(error => {\n      console.error('Error liking/unliking post:', error);\n    });\n  };\n};\nexport const submitComment = async (postId, commentText, parentId = null) => {\n  return dispatch => {\n    axios.post(`${BASE_URL}/api/comments/`, {\n      post: postId,\n      content: commentText,\n      user: user.id,\n      parent: parentId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.ok) {\n        return response.data;\n      }\n    }).then(data => {\n      dispatch(setComments({\n        ...comments,\n        [postId]: [...(comments[postId] || []), data]\n      }));\n      dispatch(setNewComment(''));\n      dispatch(setReplyingToCommentId(null));\n    }).catch(error => {\n      console.error('Error submitting comment:', error);\n    });\n  };\n};","map":{"version":3,"names":["axios","BASE_URL","setModalIsOpen","setModalImage","setImageType","setNewComment","setReplyingToCommentId","setCommentText","setShowEmojiPicker","setFollowerCount","setFollowingCount","setBookmarkPosts","setError","setLoading","setLikedPosts","setPosts","fetchProfile","userId","token","dispatch","get","headers","Authorization","then","response","setProfile","data","catch","error","_error$response","_error$response$data","detail","fetchPosts","_error$response2","_error$response2$data","likePost","postId","post","status","likedPosts","console","submitComment","commentText","parentId","content","user","id","parent","ok","setComments","comments"],"sources":["H:/SecondProject-DjangoReact/frontend/socialmedia-app/src/features/posts/profileThunks.js"],"sourcesContent":["// profileThunks.js\r\nimport axios from 'axios';\r\nimport { BASE_URL } from '../../config';\r\nimport { setModalIsOpen, setModalImage, setImageType, setNewComment, setReplyingToCommentId, setCommentText, setShowEmojiPicker, setFollowerCount, setFollowingCount, setBookmarkPosts, setError, setLoading, setLikedPosts, setPosts } from '../profileSlice';\r\nexport const fetchProfile = async (userId, token) => {\r\n  return (dispatch) => {\r\n    axios.get(`${BASE_URL}/api/users/profile/${userId}/`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        dispatch(setProfile(response.data));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(setError(error.response?.data?.detail || 'Failed to fetch profile.'));\r\n      });\r\n  };\r\n};\r\n\r\nexport const fetchPosts = async () => {\r\n  return (dispatch) => {\r\n    axios.get(`${BASE_URL}/api/posts/`)\r\n      .then((response) => {\r\n        dispatch(setPosts(response.data));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(setError(error.response?.data?.detail || 'Failed to fetch posts.'));\r\n      });\r\n  };\r\n};\r\n\r\nexport const likePost = async (postId) => {\r\n  return (dispatch) => {\r\n    axios.post(`${BASE_URL}/api/likes/`, {\r\n      post: postId,\r\n    }, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status === 201) {\r\n          dispatch(setLikedPosts({ ...likedPosts, [postId]: true }));\r\n        } else if (response.status === 204) {\r\n          dispatch(setLikedPosts({ ...likedPosts, [postId]: false }));\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error liking/unliking post:', error);\r\n      });\r\n  };\r\n};\r\n\r\nexport const submitComment = async (postId, commentText, parentId = null) => {\r\n  return (dispatch) => {\r\n    axios.post(`${BASE_URL}/api/comments/`, {\r\n      post: postId,\r\n      content: commentText,\r\n      user: user.id,\r\n      parent: parentId,\r\n    }, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.data;\r\n        }\r\n      })\r\n      .then((data) => {\r\n        dispatch(setComments({ ...comments, [postId]: [...(comments[postId] || []), data] }));\r\n        dispatch(setNewComment(''));\r\n        dispatch(setReplyingToCommentId(null));\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error submitting comment:', error);\r\n      });\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}